/*! 
 Build based on gin-vue-admin 
 Time : 1672224415000 */
import{s as e,r as l,g as a,o as t,c as u,b as o,d as i,w as d,h as n,y as r,G as s,e as p,l as c,F as v,v as m,i as f}from"./index.32af5906.js";import{a as h}from"./format.fe46b3b1.js";import"./date.23f5a973.js";import"./dictionary.28290efa.js";import"./sysDictionary.b7a85079.js";const b={class:"gva-search-box"},g={class:"gva-table-box"},V=o("div",{class:"gva-btn-list"},null,-1),y={key:0},_={class:"gva-pagination"},k={key:1,class:"starTableBox"},w=o("th",null,"指令编码:",-1),x=o("th",null,"指令类型:",-1),G=o("th",null,"指令生成时间:",-1),C=o("th",null,"执行时间:",-1),I=o("th",null,"指令来源:",-1),T=o("th",null,"执行状态:",-1),z=o("th",null,"碎片编号:",-1),U=o("th",null,"碎片名称:",-1),j=o("th",null,"卫星编码:",-1),S=o("th",null,"卫星名称:",-1),A=o("th",null,"指令内容:",-1),q={colspan:"3"},F=o("th",null,"所属业务链:",-1),N=o("th",null,"交易ID:",-1),D=o("th",null,"上链时间:",-1),E=o("th",null,"区块高度:",-1),O={key:0,class:"dialog-footer"},$={key:1,class:"dialog-footer"},B={name:"commandExecution"},H=Object.assign(B,{setup(B){const H=l({}),P=l({path:"",apiGroup:"",method:"",description:""}),J=l([{value:"POST",label:"创建",type:"success"},{value:"GET",label:"查看",type:""}]),K=l(""),L=l({path:[{required:!0,message:"请输入api路径",trigger:"blur"}],apiGroup:[{required:!0,message:"请输入组名称",trigger:"blur"}],method:[{required:!0,message:"请选择请求方式",trigger:"blur"}],description:[{required:!0,message:"请输入api介绍",trigger:"blur"}]}),M=l(1),Q=l(0),R=l(10),W=l([]),X=l({}),Y=()=>{M.value=1,R.value=10,le()},Z=e=>{R.value=e,le()},ee=e=>{M.value=e,le()},le=async()=>{let l={page:M.value,pageSize:R.value,...X.value};const a=await(l=>e({url:"/satellitebc/exec/getexecresultlist",method:"get",params:l}))(l);200===a.code&&(W.value=a.data,Q.value=a.total)};le();const ae=l(null),te=l("添加执行指令"),ue=l(!1),oe=()=>{"addApi"==K.value&&ae.value.resetFields(),P.value={path:"",apiGroup:"",method:"",description:""},ue.value=!1},ie=async l=>{const a=await(t={id:l.id},e({url:"/satellitebc/exec/getexecresult",method:"get",params:t}));var t;H.value=a.data,(e=>{switch(e){case"addApi":te.value="添加执行指令";break;case"edit":te.value="编辑执行指令";break;case"look":te.value="指令执行详情"}K.value=e,ue.value=!0})("look")},de=async()=>{ae.value.validate((async l=>{if(l)switch(K.value){case"addApi":200===(await(a=P.value,e({url:"/satellitebc/control/addinstruction",method:"post",data:a}))).code&&f({type:"success",message:"添加成功",showClose:!0}),le(),oe();break;case"edit":200===(await updateApi(P.value)).code&&f({type:"success",message:"编辑成功",showClose:!0}),le(),oe();break;default:f({type:"error",message:"未知操作",showClose:!0})}var a}))};return(e,l)=>{const f=a("el-input"),B=a("el-form-item"),le=a("el-button"),ne=a("el-form"),re=a("el-table-column"),se=a("el-table"),pe=a("el-pagination"),ce=a("el-option"),ve=a("el-select"),me=a("el-dialog");return t(),u("div",null,[o("div",b,[i(ne,{ref:"searchForm",inline:!0,model:X.value},{default:d((()=>[i(B,{label:"指令信息"},{default:d((()=>[i(f,{modelValue:X.value.searchConditions,"onUpdate:modelValue":l[0]||(l[0]=e=>X.value.searchConditions=e),placeholder:"指令信息"},null,8,["modelValue"])])),_:1}),i(B,null,{default:d((()=>[i(le,{size:"small",type:"primary",icon:"search",onClick:Y},{default:d((()=>[n("查询")])),_:1})])),_:1})])),_:1},8,["model"])]),o("div",g,[V,i(se,{data:W.value},{default:d((()=>[i(re,{align:"left",label:"指令编码",prop:"instructionId"}),i(re,{align:"left",label:"指令类型",prop:"instructionType"}),i(re,{align:"left",label:"指令内容",prop:"instructionContent"}),i(re,{label:"指令发出时间",width:"180"},{default:d((e=>[n(r(s(h)(e.row.genInstructionTime)),1)])),_:1}),i(re,{align:"left",label:"指令来源",prop:"instructionSource"}),i(re,{align:"left",label:"碎片编号",prop:"debrisId"}),i(re,{align:"left",label:"卫星编码",prop:"satelliteId"}),i(re,{align:"left",label:"卫星名称",prop:"satelliteName"}),i(re,{align:"left",label:"执行状态",prop:"execState"}),i(re,{label:"上链时间",width:"180"},{default:d((e=>[e.row.chainTime?(t(),u("div",y,r(s(h)(e.row.chainTime)),1)):p("",!0)])),_:1}),i(re,{align:"left",fixed:"right",label:"操作",width:"80"},{default:d((e=>[i(le,{icon:"view",size:"small",type:"primary",link:"",onClick:l=>ie(e.row)},{default:d((()=>[n("查看")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),o("div",_,[i(pe,{"current-page":M.value,"page-size":R.value,"page-sizes":[10,30,50,100],total:Q.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:ee,onSizeChange:Z},null,8,["current-page","page-size","total"])])]),i(me,{modelValue:ue.value,"onUpdate:modelValue":l[10]||(l[10]=e=>ue.value=e),"before-close":oe,title:te.value,width:820},{footer:d((()=>["addApi"==K.value?(t(),u("div",O,[i(le,{size:"small",onClick:oe},{default:d((()=>[n("取 消")])),_:1}),i(le,{size:"small",type:"primary",onClick:de},{default:d((()=>[n("确 定")])),_:1})])):p("",!0),"look"==K.value?(t(),u("div",$,[i(le,{size:"small",onClick:oe},{default:d((()=>[n("关闭")])),_:1})])):p("",!0)])),default:d((()=>["addApi"==K.value?(t(),c(ne,{key:0,ref_key:"apiForm",ref:ae,model:P.value,rules:L.value,"label-width":"120px"},{default:d((()=>[i(B,{label:"指令编码",prop:"path"},{default:d((()=>[i(f,{modelValue:P.value.path,"onUpdate:modelValue":l[1]||(l[1]=e=>P.value.path=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(B,{label:"指令类型",prop:"method"},{default:d((()=>[i(ve,{modelValue:P.value.method,"onUpdate:modelValue":l[2]||(l[2]=e=>P.value.method=e),placeholder:"请选择",style:{width:"100%"}},{default:d((()=>[(t(!0),u(v,null,m(J.value,(e=>(t(),c(ce,{key:e.value,label:`${e.label}(${e.value})`,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(B,{label:"指令来源",prop:"apiGroup"},{default:d((()=>[i(f,{modelValue:P.value.apiGroup,"onUpdate:modelValue":l[3]||(l[3]=e=>P.value.apiGroup=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(B,{label:"指令下发时间",prop:"apiGroup"},{default:d((()=>[i(f,{modelValue:P.value.apiGroup,"onUpdate:modelValue":l[4]||(l[4]=e=>P.value.apiGroup=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(B,{label:"碎片编号",prop:"apiGroup"},{default:d((()=>[i(f,{modelValue:P.value.apiGroup,"onUpdate:modelValue":l[5]||(l[5]=e=>P.value.apiGroup=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(B,{label:"碎片名称",prop:"apiGroup"},{default:d((()=>[i(f,{modelValue:P.value.apiGroup,"onUpdate:modelValue":l[6]||(l[6]=e=>P.value.apiGroup=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(B,{label:"目标卫星编码",prop:"description"},{default:d((()=>[i(f,{modelValue:P.value.description,"onUpdate:modelValue":l[7]||(l[7]=e=>P.value.description=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(B,{label:"目标卫星名称",prop:"description"},{default:d((()=>[i(f,{modelValue:P.value.description,"onUpdate:modelValue":l[8]||(l[8]=e=>P.value.description=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(B,{label:"指令执行内容",prop:"description"},{default:d((()=>[i(f,{type:"textarea",modelValue:P.value.description,"onUpdate:modelValue":l[9]||(l[9]=e=>P.value.description=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])):p("",!0),"look"==K.value?(t(),u("div",k,[o("table",null,[o("tr",null,[w,o("td",null,r(H.value.instructionId),1),x,o("td",null,r(H.value.instructionType),1)]),o("tr",null,[G,o("td",null,r(s(h)(H.value.genInstructionTime)),1),C,o("td",null,r(s(h)(H.value.execInstructionTime)),1)]),o("tr",null,[I,o("td",null,r(H.value.instructionSource),1),T,o("td",null,r(H.value.execState),1)]),o("tr",null,[z,o("td",null,r(H.value.debrisId),1),U,o("td",null,r(H.value.debrisName),1)]),o("tr",null,[j,o("td",null,r(H.value.satelliteId),1),S,o("td",null,r(H.value.satelliteName),1)]),o("tr",null,[A,o("td",q,r(H.value.instructionContent),1)]),o("tr",null,[F,o("td",null,r(H.value.chainId),1),N,o("td",null,r(H.value.txId),1)]),o("tr",null,[D,o("td",null,r(H.value.chainTime?s(h)(H.value.chainTime):""),1),E,o("td",null,r(H.value.blockHeight),1)])])])):p("",!0)])),_:1},8,["modelValue","title"])])}}});export{H as default};
