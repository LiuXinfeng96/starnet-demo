/*! 
 Build based on gin-vue-admin 
 Time : 1671785957000 */
import{s as e,r as l,g as a,o as t,c as u,b as s,d as i,w as o,h as r,y as d,G as m,e as n,i as p}from"./index.860b48e6.js";import{a as c}from"./format.4fc21eae.js";import"./date.23f5a973.js";import"./dictionary.8dcfcd04.js";import"./sysDictionary.12ad4d06.js";const v={class:"gva-search-box"},f={class:"gva-table-box"},g={class:"gva-btn-list"},b={key:0},V={class:"gva-pagination"},w={class:"dialog-footer"},_={name:"controlMsg"},h=Object.assign(_,{setup(_){const h=l({satelliteId:"",satelliteName:"",satelliteAttitude:"",satelliteTemperature:null,satellitePower:""}),y=l(""),z=l({satelliteId:[{required:!0,message:"请输入卫星编码",trigger:"blur"},{validator:(e,l,a)=>{if(!/^[a-zA-Z0-9._-]{3,30}$/.test(l))return a(new Error("编号须3-30位，由字母、数字以及._-组成"));a()},trigger:"blur"}],satelliteName:[{required:!0,message:"请输入卫星名称",trigger:"blur"}],satelliteAttitude:[{required:!0,message:"请输入卫星姿态信息",trigger:"blur"}],satelliteTemperature:[{required:!0,message:"请输入卫星温度信息",trigger:"blur"}],satellitePower:[{required:!0,message:"请输入卫星动力信息",trigger:"blur"}]}),A=l(1),C=l(0),T=l(10),x=l([]),j=l({}),k=()=>{A.value=1,T.value=10,P()},I=e=>{T.value=e,P()},N=e=>{A.value=e,P()},P=async()=>{let l={page:A.value,pageSize:T.value,...j.value};const a=await(l=>e({url:"/satellitebc/exec/getcontrolslist",method:"get",params:l}))(l);200===a.code&&(x.value=a.data,C.value=a.total)};P();const U=l(null),q=l("添加管控信息"),F=l(!1),S=()=>{U.value.resetFields(),h.value={satelliteId:"",satelliteName:"",satelliteAttitude:"",satelliteTemperature:null,satellitePower:""},F.value=!1},D=async()=>{U.value.validate((async l=>{if(l){200===(await(a=h.value,e({url:"/satellitebc/exec/addcontrols",method:"post",data:a}))).code&&p({type:"success",message:"添加成功",showClose:!0}),P(),S()}var a}))};return(e,l)=>{const p=a("el-input"),_=a("el-form-item"),P=a("el-button"),E=a("el-form"),G=a("el-table-column"),M=a("el-table"),O=a("el-pagination"),Z=a("el-input-number"),$=a("el-dialog");return t(),u("div",null,[s("div",v,[i(E,{ref:"searchForm",inline:!0,model:j.value},{default:o((()=>[i(_,{label:"卫星名称"},{default:o((()=>[i(p,{modelValue:j.value.searchConditions,"onUpdate:modelValue":l[0]||(l[0]=e=>j.value.searchConditions=e),placeholder:"卫星名称"},null,8,["modelValue"])])),_:1}),i(_,null,{default:o((()=>[i(P,{size:"small",type:"primary",icon:"search",onClick:k},{default:o((()=>[r("查询")])),_:1})])),_:1})])),_:1},8,["model"])]),s("div",f,[s("div",g,[i(P,{size:"small",type:"primary",icon:"plus",onClick:l[1]||(l[1]=e=>(e=>{switch(e){case"addApi":q.value="添加管控信息";break;case"edit":q.value="编辑管控信息"}y.value=e,F.value=!0})("addApi"))},{default:o((()=>[r("添加")])),_:1})]),i(M,{data:x.value},{default:o((()=>[i(G,{align:"left",label:"卫星编码",prop:"satelliteId"}),i(G,{align:"left",label:"卫星名称",prop:"satelliteName"}),i(G,{align:"left",label:"卫星姿态信息",prop:"satelliteAttitude"}),i(G,{align:"left",label:"卫星温度信息",prop:"satelliteTemperature"}),i(G,{align:"left",label:"卫星动力信息",prop:"satellitePower"}),i(G,{label:"更新时间",width:"180"},{default:o((e=>[r(d(m(c)(e.row.lastTime,1)),1)])),_:1}),i(G,{label:"上链时间",width:"180"},{default:o((e=>[e.row.chainTime?(t(),u("div",b,d(m(c)(e.row.chainTime)),1)):n("",!0)])),_:1})])),_:1},8,["data"]),s("div",V,[i(O,{"current-page":A.value,"page-size":T.value,"page-sizes":[10,30,50,100],total:C.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:N,onSizeChange:I},null,8,["current-page","page-size","total"])])]),i($,{modelValue:F.value,"onUpdate:modelValue":l[7]||(l[7]=e=>F.value=e),"before-close":S,title:q.value},{footer:o((()=>[s("div",w,[i(P,{size:"small",onClick:S},{default:o((()=>[r("取 消")])),_:1}),i(P,{size:"small",type:"primary",onClick:D},{default:o((()=>[r("确 定")])),_:1})])])),default:o((()=>[i(E,{ref_key:"apiForm",ref:U,model:h.value,rules:z.value,"label-width":"120px"},{default:o((()=>[i(_,{label:"卫星编码",prop:"satelliteId"},{default:o((()=>[i(p,{modelValue:h.value.satelliteId,"onUpdate:modelValue":l[2]||(l[2]=e=>h.value.satelliteId=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(_,{label:"卫星名称",prop:"satelliteName"},{default:o((()=>[i(p,{modelValue:h.value.satelliteName,"onUpdate:modelValue":l[3]||(l[3]=e=>h.value.satelliteName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(_,{label:"卫星姿态信息",prop:"satelliteAttitude"},{default:o((()=>[i(p,{modelValue:h.value.satelliteAttitude,"onUpdate:modelValue":l[4]||(l[4]=e=>h.value.satelliteAttitude=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(_,{label:"卫星温度信息",prop:"satelliteTemperature"},{default:o((()=>[i(Z,{modelValue:h.value.satelliteTemperature,"onUpdate:modelValue":l[5]||(l[5]=e=>h.value.satelliteTemperature=e),controls:!1,style:{width:"100%"}},null,8,["modelValue"])])),_:1}),i(_,{label:"卫星动力信息",prop:"satellitePower"},{default:o((()=>[i(p,{modelValue:h.value.satellitePower,"onUpdate:modelValue":l[6]||(l[6]=e=>h.value.satellitePower=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}});export{h as default};
