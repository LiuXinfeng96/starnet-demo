/*! 
 Build based on gin-vue-admin 
 Time : 1671785957000 */
import{s as e,r as l,g as a,o as t,c as u,b as o,d as i,w as r,h as d,e as s,y as n,G as p,F as v,v as m,l as f,i as c}from"./index.860b48e6.js";import{a as g}from"./format.4fc21eae.js";import"./date.23f5a973.js";import"./dictionary.8dcfcd04.js";import"./sysDictionary.12ad4d06.js";const b={class:"gva-search-box"},y={class:"gva-table-box"},h={class:"gva-btn-list"},V={key:0},_={key:1},I={key:2},w={key:3},C={key:0},k={class:"gva-pagination"},S={class:"dialog-footer"},T={name:"faultMsg"},z=Object.assign(T,{setup(T){const z=l({}),x=l([{value:"1",label:"I级(灾难性)故障"},{value:"2",label:"II级(严重)故障"},{value:"3",label:"III级(一般)故障"},{value:"4",label:"IV级(轻微)故障"}]),U=l([{value:"正常",label:"正常"},{value:"异常",label:"异常"}]),j=l(""),q=l({satelliteId:[{required:!0,message:"请输入卫星编码",trigger:"blur"},{validator:(e,l,a)=>{if(!/^[a-zA-Z0-9._-]{3,30}$/.test(l))return a(new Error("编号须3-30位，由字母、数字以及._-组成"));a()},trigger:"blur"}],satelliteName:[{required:!0,message:"请输入卫星名称",trigger:"blur"}],orbitId:[{required:!0,message:"请输入运行轨道",trigger:"blur"}],faultType:[{required:!0,message:"请选择故障类型",trigger:"blur"}],faultDescription:[{required:!0,message:"请输入故障描述",trigger:"blur"}],repairState:[{required:!0,message:"请选择故障修复状态",trigger:"blur"}]}),D=l(1),N=l(0),F=l(10),A=l([]),E=l({}),G=()=>{D.value=1,F.value=10,Z()},M=e=>{F.value=e,Z()},O=e=>{D.value=e,Z()},Z=async()=>{let l={page:D.value,pageSize:F.value,...E.value};const a=await(l=>e({url:"/satellitebc/exec/getfaultlist",method:"get",params:l}))(l);200===a.code&&(A.value=a.data,N.value=a.total)};Z();const $=l(null),B=l("添加故障信息"),H=l(!1),J=()=>{$.value.resetFields(),z.value={},H.value=!1},K=async()=>{$.value.validate((async l=>{if(l){200===(await(a=z.value,e({url:"/satellitebc/exec/addfault",method:"post",data:a}))).code&&c({type:"success",message:"添加成功",showClose:!0}),Z(),J()}var a}))};return(e,l)=>{const c=a("el-input"),T=a("el-form-item"),Z=a("el-button"),L=a("el-form"),P=a("el-table-column"),Q=a("el-table"),R=a("el-pagination"),W=a("el-option"),X=a("el-select"),Y=a("el-dialog");return t(),u("div",null,[o("div",b,[i(L,{ref:"searchForm",inline:!0,model:E.value},{default:r((()=>[i(T,{label:"卫星名称"},{default:r((()=>[i(c,{modelValue:E.value.searchConditions,"onUpdate:modelValue":l[0]||(l[0]=e=>E.value.searchConditions=e),placeholder:"卫星名称"},null,8,["modelValue"])])),_:1}),i(T,null,{default:r((()=>[i(Z,{size:"small",type:"primary",icon:"search",onClick:G},{default:r((()=>[d("查询")])),_:1})])),_:1})])),_:1},8,["model"])]),o("div",y,[o("div",h,[i(Z,{size:"small",type:"primary",icon:"plus",onClick:l[1]||(l[1]=e=>(e=>{switch(e){case"addApi":B.value="添加故障信息";break;case"edit":B.value="编辑故障信息"}j.value=e,H.value=!0})("addApi"))},{default:r((()=>[d("添加")])),_:1})]),i(Q,{data:A.value,onSortChange:e.sortChange,onSelectionChange:e.handleSelectionChange},{default:r((()=>[i(P,{align:"left",label:"卫星编码",prop:"satelliteId"}),i(P,{align:"left",label:"卫星名称",prop:"satelliteName"}),i(P,{align:"left",label:"运行轨道",prop:"orbitId"}),i(P,{align:"left",label:"故障类型"},{default:r((e=>[1==e.row.faultType?(t(),u("div",V,"I级(灾难性)故障")):2==e.row.faultType?(t(),u("div",_,"II级(严重)故障")):3==e.row.faultType?(t(),u("div",I,"III级(一般)故障")):4==e.row.faultType?(t(),u("div",w,"IV级(轻微)故障")):s("",!0)])),_:1}),i(P,{align:"left",label:"故障时间"},{default:r((e=>[d(n(p(g)(e.row.faultTime)),1)])),_:1}),i(P,{align:"left",label:"故障描述",prop:"faultDescription"}),i(P,{align:"left",label:"故障修复状态",prop:"repairState"}),i(P,{label:"更新时间",width:"180"},{default:r((e=>[d(n(p(g)(e.row.lastTime,1)),1)])),_:1}),i(P,{label:"上链时间",width:"180"},{default:r((e=>[e.row.chainTime?(t(),u("div",C,n(p(g)(e.row.chainTime)),1)):s("",!0)])),_:1})])),_:1},8,["data","onSortChange","onSelectionChange"]),o("div",k,[i(R,{"current-page":D.value,"page-size":F.value,"page-sizes":[10,30,50,100],total:N.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:O,onSizeChange:M},null,8,["current-page","page-size","total"])])]),i(Y,{modelValue:H.value,"onUpdate:modelValue":l[8]||(l[8]=e=>H.value=e),"before-close":J,title:B.value},{footer:r((()=>[o("div",S,[i(Z,{size:"small",onClick:J},{default:r((()=>[d("取 消")])),_:1}),i(Z,{size:"small",type:"primary",onClick:K},{default:r((()=>[d("确 定")])),_:1})])])),default:r((()=>[i(L,{ref_key:"apiForm",ref:$,model:z.value,rules:q.value,"label-width":"120px"},{default:r((()=>[i(T,{label:"卫星编码",prop:"satelliteId"},{default:r((()=>[i(c,{modelValue:z.value.satelliteId,"onUpdate:modelValue":l[2]||(l[2]=e=>z.value.satelliteId=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(T,{label:"卫星名称",prop:"satelliteName"},{default:r((()=>[i(c,{modelValue:z.value.satelliteName,"onUpdate:modelValue":l[3]||(l[3]=e=>z.value.satelliteName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(T,{label:"运行轨道",prop:"orbitId"},{default:r((()=>[i(c,{modelValue:z.value.orbitId,"onUpdate:modelValue":l[4]||(l[4]=e=>z.value.orbitId=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(T,{label:"故障类型",prop:"faultType"},{default:r((()=>[i(X,{modelValue:z.value.faultType,"onUpdate:modelValue":l[5]||(l[5]=e=>z.value.faultType=e),placeholder:"请选择",style:{width:"100%"}},{default:r((()=>[(t(!0),u(v,null,m(x.value,(e=>(t(),f(W,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(T,{label:"故障描述",prop:"faultDescription"},{default:r((()=>[i(c,{type:"textarea",modelValue:z.value.faultDescription,"onUpdate:modelValue":l[6]||(l[6]=e=>z.value.faultDescription=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(T,{label:"故障修复状态",prop:"repairState"},{default:r((()=>[i(X,{modelValue:z.value.repairState,"onUpdate:modelValue":l[7]||(l[7]=e=>z.value.repairState=e),placeholder:"请选择",style:{width:"100%"}},{default:r((()=>[(t(!0),u(v,null,m(U.value,(e=>(t(),f(W,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}});export{z as default};
